"use strict";$(document).ready(function(){function r(t,e,i){var n=new Date;n.setDate(n.getDate()+i),document.cookie=t+"="+encodeURIComponent(e)+";expires="+n}function o(t){var e=decodeURIComponent(document.cookie).split("; "),i=!0,n=!1,a=void 0;try{for(var r,o=e[Symbol.iterator]();!(i=(r=o.next()).done);i=!0){var l=r.value.split("=");if(t===l[0])return l[1]}}catch(t){n=!0,a=t}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}}$(".header").load("../html/index.html  .header #home-top , .header #home-logo,.header #home-logo , .header #right-aside , .header #banner-top-nav"),$("#footer").load("../html/index.html #footer .part1,#footer .part2,#footer .part3");var l=[],s=[],d=0;if(o("numarr")&&o("sidarr")&&(l=o("numarr").split(","),s=o("sidarr").split(","),$.each(s,function(t,e){!function(n,a){$.ajax({type:"post",url:"http://10.31.157.68/js1907/MY/preproject/php/shopcar.php",dataType:"json",success:function(t){$.each(t,function(t,e){if(e.sid==n){var i=$(".goodtable .table:hidden").clone(!0,!0);i.css({display:"block"}),i.find(".gooddes").find(".pic").attr({src:e.url,sid:e.sid}),i.find(".gooddes").find(".title").html(e.title),i.find(".gooddes").find(".des").html(e.des),i.find(".prices").find("span").html(e.prices),i.find(".prices").find("em").html(e.prices*a),d+=parseInt(i.find(".prices").find("em").html()),$(".total .total-price .span2").html(d),$(".goodslist .xtotal .right span").html(d),i.find(".shuliang").find("em").html(a),$(".goodtable").append(i)}})}})}(s[t],l[t])})),$(".goodtable").on("click",".jiajia",function(){var t=parseInt($(this).parents(".shuliang").find("em").html());if(t<=11){t++,$(this).parents(".shuliang").find("em").html(t);var e=$(this).parents(".table").find(".prices").find("span").html();$(this).parents(".table").find(".prices").find("em").html(t*e),l=o("numarr").split(",");var i=(s=o("sidarr").split(",")).indexOf($(this).parents("table").find("img").attr("sid"));l[i]=t,r("numarr",l,30),r("sidarr",s,30),l=o("numarr").split(",");var n=$(this).parents(".container").find(".total").find(".right").find(".total-num").find("em"),a=0;$.each(l,function(t,e){a+=parseInt(e)}),n.html(a),$(this).parents("table").find(".prices").find("em").html()}else alert("限购12件哦~")}),$(".goodtable").on("click",".jianjian",function(){var t=parseInt($(this).parents(".shuliang").find("em").html());if(2<=t){t--;var e=$(this).parents(".table").find(".prices").find("span").html();$(this).parents(".table").find(".prices").find("em").html(t*e),$(this).parents(".shuliang").find("em").html(t),l=o("numarr").split(",");var i=(s=o("sidarr").split(",")).indexOf($(this).parents("table").find("img").attr("sid"));l[i]=t,r("numarr",l,30),r("sidarr",s,30),l=o("numarr").split(",");var n=$(this).parents(".container").find(".total").find(".right").find(".total-num").find("em"),a=0;$.each(l,function(t,e){a+=parseInt(e)}),n.html(a)}else alert("不能减少啦~")}),$(".total .all-choose input").on("click",function(){$(this).prop("checked")?$(".goodtable .table input:visible").prop("checked","checked"):$(".goodtable .table input:visible").prop("checked",!1)}),o("numarr")&&o("sidarr")){l=o("numarr").split(",");var i=0;$.each(l,function(t,e){i+=parseInt(e)}),$(".total .total-num em").html(i)}$(".goodtable").click(function(t){"INPUT"===t.target.nodeName&&(console.log(),$(".goodtable .table:visible input:checked").length===$(".goodtable .table:visible input").length?$(".total .all-choose input").prop("checked",!0):$(".total .all-choose input").prop("checked",!1))}),$(".goodtable").on("click",".dels",function(){if(confirm("您确认要删除吗？")){l=o("numarr").split(",");var t=(s=o("sidarr").split(",")).indexOf($(this).parents(".goodtable").find(".gooddes").find("img").attr("sid"));l.splice(t,1),s.splice(t,1),r("numarr",l,30),r("sidarr",s,30),$(this).parents(".table").hide(),l=o("numarr").split(",");var e=$(this).parents(".container").find(".total").find(".right").find(".total-num").find("em"),i=0;$.each(l,function(t,e){i+=parseInt(e)}),1==i?e.html(i):e.html("0")}})});